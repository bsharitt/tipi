10 REM #### Initial Data
11 FAILS=0
12 GOTO 9000

20 REM #### Reset TIPI Mappings
30 OPEN #1:"PI.CONFIG",OUTPUT
40 PRINT #1:"DSK1_DIR="
50 PRINT #1:"DSK2_DIR="
60 PRINT #1:"DSK3_DIR="
70 PRINT #1:"DSK4_DIR="
80 CLOSE #1
90 RETURN

100 REM #### Finish / End of test
110 PRINT "Failures: ";
120 PRINT FAILS
121 IF FAILS=0 THEN STOP
122 PRINT "Check prerequisites paths:"
123 PRINT "  dir TIPI.UNITTEST.SUBDIR1."
130 STOP

200 REM #### Generic Error Handler
210 CALL ERR(EC,ET,ES,EL)
220 PRINT EC;ET;ES;EL
230 FAILS=FAILS+1
240 RETURN NEXT

1000 PRINT "#### Test TIPI. vol is TIPI"
1002 ON ERROR 200 :: OPEN #1:"TIPI.", INPUT, INTERNAL, FIXED
1006 ON ERROR 200 :: INPUT #1:V$,A,B,C
1011 ON ERROR 200 :: CLOSE #1
1030 IF V$="TIPI" THEN RETURN
1040 FAILS=FAILS+1
1045 PRINT "VOL of 'TIPI.' is: "&V$
1050 RETURN

1100 PRINT "#### Test subdir vol is TIPI"
1110 ON ERROR 200 :: OPEN #1:"TIPI.UNITTEST.", INPUT, INTERNAL, FIXED
1130 ON ERROR 200 :: INPUT #1:V$,A,B,C
1150 ON ERROR 200 :: CLOSE #1
1170 IF V$="TIPI" THEN RETURN
1180 FAILS=FAILS+1
1190 PRINT "VOL of 'TIPI.UNITEST.' is: "&V$
1191 RETURN

1200 PRINT "#### Test DSK1. vol name"
1210 OPEN #1:"PI.CONFIG", OUTPUT
1211 PRINT #1:"DSK1_DIR=UNITTEST"
1212 CLOSE #1
1220 ON ERROR 200 :: OPEN #1:"DSK1.", INPUT, INTERNAL, FIXED
1230 ON ERROR 200 :: INPUT #1:V$,A,B,C
1240 ON ERROR 200 :: CLOSE #1
1250 IF V$="UNITTEST" THEN RETURN
1260 FAILS=FAILS+1
1270 PRINT "VOL of 'DSK1.' is: "&V$
1299 RETURN

1300 PRINT "#### Test subdir of DSK1. vol name"
1310 OPEN #1:"PI.CONFIG", OUTPUT
1311 PRINT #1:"DSK1_DIR=UNITTEST"
1312 CLOSE #1
1320 ON ERROR 200 :: OPEN #1:"DSK1.SUBDIR1.", INPUT, INTERNAL, FIXED
1330 ON ERROR 200 :: INPUT #1:V$,A,B,C
1340 ON ERROR 200 :: CLOSE #1
1350 IF V$="UNITTEST" THEN RETURN
1360 FAILS=FAILS+1
1370 PRINT "VOL of 'DSK1.SUBDIR1.' is: "&V$
1399 RETURN

1400 PRINT "#### Test DSK2. vol name"
1410 OPEN #1:"PI.CONFIG", OUTPUT
1411 PRINT #1:"DSK2_DIR=UNITTEST"
1412 CLOSE #1
1420 ON ERROR 200 :: OPEN #1:"DSK2.", INPUT, INTERNAL, FIXED
1430 ON ERROR 200 :: INPUT #1:V$,A,B,C
1440 ON ERROR 200 :: CLOSE #1
1450 IF V$="UNITTEST" THEN RETURN
1460 FAILS=FAILS+1
1470 PRINT "VOL of 'DSK2.' is: "&V$
1499 RETURN

1500 PRINT "#### Test subdir of DSK2. vol name"
1510 OPEN #1:"PI.CONFIG", OUTPUT
1511 PRINT #1:"DSK2_DIR=UNITTEST"
1512 CLOSE #1
1520 ON ERROR 200 :: OPEN #1:"DSK2.SUBDIR1.", INPUT, INTERNAL, FIXED
1530 ON ERROR 200 :: INPUT #1:V$,A,B,C
1540 ON ERROR 200 :: CLOSE #1
1550 IF V$="UNITTEST" THEN RETURN
1560 FAILS=FAILS+1
1570 PRINT "VOL of 'DSK2.SUBDIR1.' is: "&V$
1599 RETURN

1600 PRINT "#### Test DSK3. vol name"
1610 OPEN #1:"PI.CONFIG", OUTPUT
1611 PRINT #1:"DSK3_DIR=UNITTEST"
1612 CLOSE #1
1620 ON ERROR 200 :: OPEN #1:"DSK3.", INPUT, INTERNAL, FIXED
1630 ON ERROR 200 :: INPUT #1:V$,A,B,C
1640 ON ERROR 200 :: CLOSE #1
1650 IF V$="UNITTEST" THEN RETURN
1660 FAILS=FAILS+1
1670 PRINT "VOL of 'DSK3.' is: "&V$
1699 RETURN

1700 PRINT "#### Test subdir of DSK3. vol name"
1710 OPEN #1:"PI.CONFIG", OUTPUT
1711 PRINT #1:"DSK3_DIR=UNITTEST"
1712 CLOSE #1
1720 ON ERROR 200 :: OPEN #1:"DSK3.SUBDIR1.", INPUT, INTERNAL, FIXED
1730 ON ERROR 200 :: INPUT #1:V$,A,B,C
1740 ON ERROR 200 :: CLOSE #1
1750 IF V$="UNITTEST" THEN RETURN
1760 FAILS=FAILS+1
1770 PRINT "VOL of 'DSK3.SUBDIR1.' is: "&V$
1799 RETURN

1800 PRINT "#### Test DSK4. vol name"
1810 OPEN #1:"PI.CONFIG", OUTPUT
1811 PRINT #1:"DSK4_DIR=UNITTEST"
1812 CLOSE #1
1820 ON ERROR 200 :: OPEN #1:"DSK4.", INPUT, INTERNAL, FIXED
1830 ON ERROR 200 :: INPUT #1:V$,A,B,C
1840 ON ERROR 200 :: CLOSE #1
1850 IF V$="UNITTEST" THEN RETURN
1860 FAILS=FAILS+1
1870 PRINT "VOL of 'DSK4.' is: "&V$
1899 RETURN

1900 PRINT "#### Test subdir of DSK4. vol name"
1910 OPEN #1:"PI.CONFIG", OUTPUT
1911 PRINT #1:"DSK4_DIR=UNITTEST"
1912 CLOSE #1
1920 ON ERROR 200 :: OPEN #1:"DSK4.SUBDIR1.", INPUT, INTERNAL, FIXED
1930 ON ERROR 200 :: INPUT #1:V$,A,B,C
1940 ON ERROR 200 :: CLOSE #1
1950 IF V$="UNITTEST" THEN RETURN
1960 FAILS=FAILS+1
1970 PRINT "VOL of 'DSK4.SUBDIR1.' is: "&V$
1999 RETURN

2000 PRINT "#### Test DSK0. vol name"
2002 ON ERROR 200 :: OPEN #1:"DSK0.", INPUT, INTERNAL, FIXED
2006 ON ERROR 200 :: INPUT #1:V$,A,B,C
2011 ON ERROR 200 :: CLOSE #1
2030 IF V$="TIPI" THEN RETURN
2040 FAILS=FAILS+1
2045 PRINT "VOL of 'DSK0.' is: "&V$
2050 RETURN

2100 PRINT "#### Test subdir of DSK0. vol name"
2110 ON ERROR 200 :: OPEN #1:"DSK0.UNITTEST.", INPUT, INTERNAL, FIXED
2130 ON ERROR 200 :: INPUT #1:V$,A,B,C
2150 ON ERROR 200 :: CLOSE #1
2170 IF V$="TIPI" THEN RETURN
2180 FAILS=FAILS+1
2190 PRINT "VOL of 'DSK0.UNITEST.' is: "&V$
2191 RETURN

2200 PRINT "#### Test DSK.<VOL> name"
2201 GOSUB 20
2202 OPEN #1:"PI.CONFIG", OUTPUT
2203 PRINT #1:"DSK1_DIR=UNITTEST.SUBDIR1"
2204 CLOSE #1
2210 ON ERROR 200 :: OPEN #1:"DSK.SUBDIR1.", INPUT, INTERNAL, FIXED
2230 ON ERROR 200 :: INPUT #1:V$,A,B,C
2250 ON ERROR 200 :: CLOSE #1
2270 IF V$="SUBDIR1" THEN RETURN
2280 FAILS=FAILS+1
2290 PRINT "VOL of 'DSK.SUBDIR1.' is: "&V$
2291 RETURN

2300 PRINT "#### Test DSK.TIPI. name"
2301 GOSUB 20
2310 ON ERROR 200 :: OPEN #1:"DSK.TIPI.", INPUT, INTERNAL, FIXED
2320 ON ERROR 200 :: INPUT #1:V$,A,B,C
2330 ON ERROR 200 :: CLOSE #1
2340 IF V$="TIPI" THEN RETURN
2350 FAILS=FAILS+1
2360 PRINT "VOL of 'DSK.TIPI.' is: "&V$
2370 RETURN

9000 PRINT "VOLUME NAME TESTS"
9001 GOSUB 20
9010 FOR G=1 TO 14
9020 ON G GOSUB 1000,1100,1200,1300,1400,1500,1600,1700,1800,1900,2000,2100,2200,2300
9030 NEXT G
9900 GOTO 100
