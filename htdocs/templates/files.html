
{% extends "page_template.html"%}
{% block content %}

<script>
function checkFields(f) {
    if (f.upload_file.value == '') {
       alert("Please select a file from your computer to upload to TIPI");
       f.upload_file.focus();
       
       return false;
    }

    f.uploadFileSubmit.value = ' Uploading, Please Wait ... ';
    f.uploadFileSubmit.disabled = true;
}
</script>

<div class="alert alert-info" role="alert">
    
</div>

<div class="files_container">
<form method="post" action="/update">
<table cellspacing=4 cellpadding=0 border=0>
    <tr><td colspan=9> Total files: {{ total_files }} </td></tr>
    <tr><td colspan=9> Displaying contents of &nbsp; <b>{{ display_path }}</b> 
                       &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="{{ request.path }}">refresh</a>
        </td>
    </tr>

  <tr><td colspan=9> &nbsp; </td></tr>

  <tr>
    <td colspan=3>
      <select name="operation">
        <option value="delete">Delete</option>
        <option value="tifiles">Convert</option>
      </select>
    </td>
    <td colspan=1>
      <input type="submit" value="Submit"/>
    </td>
    <td colspan=5/>
  </tr>

  <tr>
    <td> &nbsp; </td>
    <td> &nbsp; </td>
    <td><b>filename</td>
    <td><b>type</td>
    <td><b>size</td>
    <td> &nbsp; &nbsp; <b>datestamp</td>
    <td> &nbsp; </td>
    <td> &nbsp; </td>
    <td><b>native name</b></td>
  </tr>

{% for tipi_file in tipi_dir_listing %}
  <tr>
    <td valign=center align=center> <input type="checkbox" name="select" value=" {{ tipi_file.name }} "/> </td>
    <td valign=center align=center> {{ tipi_file.icon|safe }} </td>
    <td valign=center> {{ tipi_file.name|safe }} </td>
    <td valign=center align=left> {{ tipi_file.type }} </td>
    <td valign=center align=right> {{ tipi_file.size }} </td>
    <td valign=center> &nbsp; &nbsp; {{ tipi_file.date }} </td>
    <td valign=center> &nbsp; &nbsp; {{ tipi_file.edit_link|safe }} </td>
    <td valign=center> &nbsp; &nbsp; {{ tipi_file.dl_link|safe }} </td>
{% if tipi_file.longname != None %}
    <td valign=center> {{ tipi_file.longname|safe }} </td>
{% else %}
    <td valign=center> &nbsp; </td>
{% endif %}
  </tr>

{% endfor %}

</table>
</form>
</div>





<div class="files_container">
<table cellpadding=4 cellspacing=0 border=0>
    <tr> <td>           
                        <input id="newDirButton" type=button value=" Create a New Directory in: {{ display_path }}" onClick="document.getElementById('newDirButton').style.display='none'; document.getElementById('newDirForm').style.display='block';document.getElementById('newDir').focus();"> 
                        <div id="newDirForm" style="display:none">
                        <form method=post action="/newdir">
                        <input type=hidden name="path" value="{{ display_path }}">
                        <input type="text" id="newDir" size=32 name="newdir" placeholder="New Directory Name">
                        <input type=submit value=" Create ">
                        </form>
                        </div>
         </td> 
         <td> 
                        <input id="newBasicFileButton" type=button value=" Create new BASIC file in: {{ display_path }} " onClick="document.getElementById('newBasicFileButton').style.display='none'; document.getElementById('newBasicFileForm').style.display='block';document.getElementById('file').focus();"> 
                        <div id="newBasicFileForm" style="display:none">
                        <form method=post action="/new_basic_file">
                        <input type=hidden name="path" value="{{ display_path }}">
                        <input type="text" id="file" size=32 name="file" placeholder="New BASIC Filename">
                        <input type=submit value=" Create ">
                        </form>
                        </div>
         </td>
    </tr>
    <tr>
        <td nowrap>
                    <form name="f" action="/uploadFile" method=post enctype="multipart/form-data" onSubmit="return checkFields(this);">
                    <input type=hidden name="path" value="{{ display_path }}">
                    Upload File to {{ display_path }}: <input type="file" name="upload_file" onClick="f.uploadFileSubmit.value=' Upload ';f.uploadFileSubmit.disabled=false;"> 
                    <input name="uploadFileSubmit" id="uploadFileSubmit" type=submit value=" Upload ">
                    </form>
        </td>
        <td nowrap> &nbsp; </td>
    </tr>
</table>
</div>

<BR><BR>  

{% endblock %}



